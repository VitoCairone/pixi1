<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Hello World</title>
  <style>
    * {padding: 0; margin: 0}
  </style>
</head>
  <script src="pixi.js"></script>
  <script src="piximags.js"></script>
<body>

  <div id="fillout" style="position: absolute; height: 600px; width: 100%; background-color: red;">
  <div id="fillout300" style="position: absolute; height: 300px; width: 100%; background-color: blue;">

  <script type="text/javascript">
    var type = "WebGL"
    if(!PIXI.utils.isWebGLSupported()){
      alert("no WebGL support, fallback to canvas");
      type = "canvas"
    } else {
      console.log("Using WebGL!");
    }

    PIXI.utils.sayHello(type)

    //Create the renderer

    // kitkatattack sez: "Importantly: although the stage also has width and 
    // height properties, they don't refer to the size of the rendering 
    // window. The stage's width and height just tell you the area occupied 
    // by the things you put inside it

    var widthPixels = 200;
    var heightPixels = 200;
    var renderer = PIXI.autoDetectRenderer(
      widthPixels,
      heightPixels,
      {
        antialias: false,
        transparent: true,
        resoultion: 1
      });

    renderer.view.style.position = "absolute";
    renderer.view.style.display = "block";
    renderer.autoResize = true;
    // console.log("iW = " + window.innerWidth);
    // console.log("iH = " + window.innerHeight);
    // unknown why window.innerHeight is 604 when actual height is not??
    renderer.resize(window.innerWidth, 600);

    //Add the canvas to the HTML document
    document.body.appendChild(renderer.view);

    //Create a container object called the `stage`
    var stage = new PIXI.Container();

    Magnetic.init(renderer, stage);

    // var circles = [];

    // //Use Pixi's built-in `loader` object to load an image
    // PIXI.loader
    // .add("images/run_1.png")
    // .load(setup);

    // function animate() {
    //   update();
    //   draw();
    //   requestAnimationFrame(animate);
    // }

    // function update() {
    //   for (var i = 0; i < circles.length; i++) {
    //     circles[i].x += Math.random() * 20;
    //     circles[i].x -= Math.random() * 15;
    //     circles[i].y += Math.random() * 20;
    //     circles[i].y -= Math.random() * 15;
    //   }
    //   console.log("updated " + circles.length);
    // }

    // function draw() {
    //   //Render the stage   
    //   renderer.render(stage);
    // }

    // //This `setup` function will run when the image has loaded
    // function setup() {

    //   //Create the `wizard` sprite from the texture
    //   // var wizard = new PIXI.Sprite(
    //   //   PIXI.loader.resources["images/run_1.png"].texture
    //   // );

    //   // wizard.scale.set(0.3, 0.3);

    //   //Add the wizard to the stage
    //   // stage.addChild(wizard);

    //   for (var i = 0; i < 100; i++) {
    //     // this draws a hollow circle
    //     var pixiCircle = new PIXI.Graphics();
    //     pixiCircle.beginFill(0xFF00FF);
    //     // pixiCircle.lineStyle(10, 0xFF00FF);  //(thickness, color)
    //     pixiCircle.drawCircle(0, 0, 10);   //(x,y,radius)
    //     pixiCircle.endFill();
    //     circles.push(pixiCircle);
    //     stage.addChild(pixiCircle);
    //   }

    //   requestAnimationFrame(animate);
    // }

  </script>
</body>
</html>