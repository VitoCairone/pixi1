<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Hello World</title>
</head>
  <script src="pixi.js"></script>
<body>
  <script type="text/javascript">
    var type = "WebGL"
    if(!PIXI.utils.isWebGLSupported()){
      alert("no WebGL support, fallback to canvas");
      type = "canvas"
    }

    PIXI.utils.sayHello(type)

    //Create the renderer
    var renderer = PIXI.autoDetectRenderer(256, 256);

    //Add the canvas to the HTML document
    document.body.appendChild(renderer.view);

    //Create a container object called the `stage`
    var stage = new PIXI.Container();

    var circles = [];

    //Use Pixi's built-in `loader` object to load an image
    PIXI.loader
    .add("images/run_1.png")
    .load(setup);

    function animate() {
      update();
      draw();
      requestAnimationFrame(animate);
    }

    function update() {
      for (var i = 0; i < circles.length; i++) {
        circles[i].x += Math.random() * 20;
        circles[i].x -= Math.random() * 15;
        circles[i].y += Math.random() * 20;
        circles[i].y -= Math.random() * 15;
      }
      console.log("updated " + circles.length);
    }

    function draw() {
      //Render the stage   
      renderer.render(stage);
    }

    //This `setup` function will run when the image has loaded
    function setup() {

      //Create the `wizard` sprite from the texture
      // var wizard = new PIXI.Sprite(
      //   PIXI.loader.resources["images/run_1.png"].texture
      // );

      // wizard.scale.set(0.3, 0.3);

      //Add the wizard to the stage
      // stage.addChild(wizard);

      for (var i = 0; i < 100; i++) {
        // this draws a hollow circle
        var pixiCircle = new PIXI.Graphics();
        pixiCircle.beginFill(0xFF00FF);
        // pixiCircle.lineStyle(10, 0xFF00FF);  //(thickness, color)
        pixiCircle.drawCircle(0, 0, 10);   //(x,y,radius)
        pixiCircle.endFill();
        circles.push(pixiCircle);
        stage.addChild(pixiCircle);
      }

      requestAnimationFrame(animate);
    }

  </script>
</body>
</html>